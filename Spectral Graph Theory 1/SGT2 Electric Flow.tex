% --------------------------------------------------------------
% This is all preamble stuff that you don't have to worry about.
% Head down to where it says ``Start here"
% --------------------------------------------------------------
 
\documentclass[12pt]{article}
 

 
\usepackage[margin=1in]{geometry} 
\usepackage{amsmath,amsthm,amssymb}
\usepackage{graphicx}
\usepackage{tabto}

% \newtheorem{problem}{Problem}
% \newtheorem{solution}{Solution}
 
\newcommand{\N}{\mathbb{N}}
\newcommand{\Z}{\mathbb{Z}}

\newenvironment{solution}[2][Solution]{\begin{trivlist}
\item[\hskip \labelsep {\bfseries #1}\hskip \labelsep {\bfseries #2.}]}{\end{trivlist}}
 
\newenvironment{problem}[2][Problem]{\begin{trivlist}
\item[\hskip \labelsep {\bfseries #1}\hskip \labelsep {\bfseries #2.}]}{\end{trivlist}}
 
\newenvironment{theorem}[2][Theorem]{\begin{trivlist}
\item[\hskip \labelsep {\bfseries #1}\hskip \labelsep {\bfseries #2.}]}{\end{trivlist}}
\newenvironment{claim}[2][Claim]{\begin{trivlist}
		\item[\hskip \labelsep {\bfseries #1}\hskip \labelsep {\bfseries #2.}]}{\end{trivlist}}
\newenvironment{lemma}[2][Lemma]{\begin{trivlist}
\item[\hskip \labelsep {\bfseries #1}\hskip \labelsep {\bfseries #2.}]}{\end{trivlist}}
\newenvironment{exercise}[2][Exercise]{\begin{trivlist}
\item[\hskip \labelsep {\bfseries #1}\hskip \labelsep {\bfseries #2.}]}{\end{trivlist}}
\newenvironment{reflection}[2][Reflection]{\begin{trivlist}
\item[\hskip \labelsep {\bfseries #1}\hskip \labelsep {\bfseries #2.}]}{\end{trivlist}}
\newenvironment{proposition}[2][Proposition]{\begin{trivlist}
\item[\hskip \labelsep {\bfseries #1}\hskip \labelsep {\bfseries #2.}]}{\end{trivlist}}
\newenvironment{corollary}[2][Corollary]{\begin{trivlist}
\item[\hskip \labelsep {\bfseries #1}\hskip \labelsep {\bfseries #2.}]}{\end{trivlist}}
\newenvironment{definition}[2][Definition]{\begin{trivlist}
		\item[\hskip \labelsep {\bfseries #1}\hskip \labelsep {\bfseries #2.}]}{\end{trivlist}}


\newenvironment{example}[2][Example]{\begin{trivlist}
		\item[\hskip \labelsep {\bfseries #1}\hskip \labelsep {\bfseries #2.}]}{\end{trivlist}}
	
\newenvironment{algorithm}[2][Algorithm]{\begin{trivlist}
		\item[\hskip \labelsep {\bfseries #1}\hskip \labelsep {\bfseries #2.}]}{\end{trivlist}}
 
\begin{document}
 
% --------------------------------------------------------------
%                         Start here
% --------------------------------------------------------------
 
%\renewcommand{\qedsymbol}{\filledbox}
 
\title{Spectral Graph Theory -- Electric Flow}
\author{Zhiwei Zhang}

 
\maketitle
\section{Introduction}
In this notes, we are going to discuss the interestingproperties when turning a graph into a network of resistors.

\subsection{Electrical Laws}
First recall some E\&M Laws:
\begin{align*}
&I = \frac{U}{R} & \text{ Ohm's law}\\
&E = I^2R &\text{ Energy formula}\\
&|I_{v, in}| = |I_{v, out}| & \text{ conservation of flow}\\
\end{align*}
Note that the last law only holds for nodes that are not source or sink.

\subsection{Matrices}
Also recall the laplacian of a graph:
$$L _ { i , j } : = \left\{ \begin{array} { l l } { \operatorname { deg } \left( v _ { i } \right) } & { \text { if } i = j } \\ { - 1 } & { \text { if } i \neq j \text { and } v _ { i } \text { is adjacent to } v _ { j } } \\ { 0 } & { \text { otherwise } } \end{array} \right.$$
Weighted laplacian of a graph:
$$
L _ { i j } = \left\{ \begin{array} { l l } { - w _ { i j } } & { \text { if } i \sim j } \\ { w _ { i } } & { \text { if } i = j } \\ { 0 } & { \text { otherwise } } \end{array} \right.
$$
where $w _ { i } = \sum _ { j \sim i } w _ { i j }$ is the sum of the weights of edges incident on vertex $i$.\\
\newline
Pseudoinverse of laplacian:
Let $0 = \lambda _ { 1 } < \lambda _ { 2 } \leqslant \ldots \leq \lambda _ { n }$ be the eigenvalues of  $L_G$ with associated eigenvectors $u _ { 1 } , u _ { 2 } , \ldots , u _ { n }$. Then $$L _ { G } = \sum _ { i = 1 } ^ { n } \lambda _ { i } u _ { i } u _ { i } ^ { T }$$. The pseudo-inverse of $L_G$ is $$L _ { G } ^ { + } = \sum _ { i = 2 } ^ { n } \frac { 1 } { \lambda _ { i } } u _ { i } n _ { i } ^ { T }$$.

\subsection{Formation on Graph}
We will write a matrix formation of the problem.\\
\begin{itemize}
	\item Let $G(V, E)$ be an undirected graph with $|V| = n, |E| = m$.
	\item Let $v \in \mathbb{R}^n$ be the vector representing the potentials of vertices.
	\item Edges represent the resistors, and $\forall e(u, v) \in E$. Edge $e$ has resistance $r_e$.
	\item Let $f \in \mathbb{R}^m$ representing the flow of all edges, where $f(a, b)$ represents the flow from $a$ to $b$ with. Since $f(a, b)$ is directed, we have $f(a, b) = -f(b, a)$.
	\item Let weight $w_e= \frac{1}{r_e}$, or the "conductance" of $e$.
\end{itemize}

\section{Matrix Formation}
We also define $ f _ { e x t } ( a ) = \sum _ { b = ( a , b ) \in E } f ( a , b )$, and $f_{ex}t(a)$ basically denotes the external current on $a$, which is \textbf{positive number if $a$ is souce, negative number with equal magnitude if $a$ is source, and zero otherwise}. So $f_{ext}$ is a very sparse vector.\\
\newline
Ohm's law directly states that $f ( a , b ) = \frac { v ( a ) - v ( b ) } { r _ { a , b } } = w _ { a , b } ( v ( a ) - v ( b ) )$, therefore $$\sum _ { b : ( a , b ) \in E } f ( a , b ) = \sum _ { b : ( a , b ) \in E } w _ { a , b } ( v ( a ) - v ( b ) ) = d ( a ) v ( a ) - \sum _ { b : ( a , b ) \in E } w _ { a, b  } v ( b )$$ where $d(a) = \sum_{b : ( a , b ) \in E }w_{a, b}$, the weighted degree of $a$.\\
\newline
Notice that $d(a), w_{a, b}$ are entries of the weighted laplacian $L_G$, and through simple verification, we can show that the equation above the equivalent to $L_Gv = f_{ext}$

\section{Computing Voltages}
Since we know that $Nul(L_G) = \vec{1}$, it's trivial to see that for any vector $x$, $L_G x$ is perpendicular to $\vec{1}$, which implies there's a solution to $L_Gv = f_{ext}$ iff $f_{ext}$ is perpendicular to 1. This is also simply true since the two non-zero entries of $f_{ext}$ have the same magnitude with opposite sign.\\
\newline
Therefore $v = L_{G}^+ f_{ext}$ is the only solution with $v \perp \vec{1}$, and the whole set of solution is $\{v + c\vec{1} | c\in \mathbb{R}\}$ \\
\newline
This also makes sense in the physical way, as if we increase the potential of all nodes, the physical flow or energy will not change as electrical potentials are only significant when taking differences.

\end{document}








